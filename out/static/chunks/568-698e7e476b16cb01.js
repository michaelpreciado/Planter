"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{7802:function(e,t,a){a.d(t,{OW:function(){return i},gj:function(){return s},qb:function(){return r}});var n=a(2265);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{threshold:t=100,velocityThreshold:a=.3,onSwipeLeft:r,onSwipeRight:i,onSwipeUp:s,onSwipeDown:l}=e,o=(0,n.useRef)(0),u=(0,n.useRef)(0),c=(0,n.useRef)(0);return(0,n.useEffect)(()=>{let e=e=>{if(e.touches.length>0){let t=e.touches[0];o.current=t.clientX,u.current=t.clientY,c.current=Date.now()}},n=e=>{if(e.changedTouches.length>0){let n=e.changedTouches[0],d=n.clientX-o.current,h=n.clientY-u.current,g=Date.now()-c.current;0!==g&&((Math.abs(d)>t||Math.abs(d)/g>a)&&(d>0&&i?i():d<0&&r&&r()),(Math.abs(h)>t||Math.abs(h)/g>a)&&(h>0&&l?l():h<0&&s&&s()))}};try{return document.addEventListener("touchstart",e,{passive:!0}),document.addEventListener("touchend",n,{passive:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("touchend",n)}}catch(e){return console.warn("Error setting up mobile gestures:",e),()=>{}}},[t,a,r,i,s,l]),null}function i(){let e=e=>{if("vibrate"in navigator)try{navigator.vibrate(e)}catch(e){console.warn("Vibration not supported:",e)}};return{vibrate:e,lightImpact:()=>e(10),mediumImpact:()=>e(20),heavyImpact:()=>e(30),success:()=>e([10,50,10]),error:()=>e([50,100,50]),warning:()=>e([20,50,20])}}function s(e){let[t,a]=(0,n.useState)(!1),[r,i]=(0,n.useState)(0),s=(0,n.useRef)(0),l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let n=l.current;if(!n)return;let o=e=>{0===n.scrollTop&&e.touches.length>0&&(s.current=e.touches[0].clientY)},u=e=>{if(0===n.scrollTop&&s.current>0&&e.touches.length>0){let t=Math.max(0,e.touches[0].clientY-s.current);i(Math.min(t,100)),t>0&&e.preventDefault()}},c=async()=>{if(r>60&&!t){a(!0);try{await e()}catch(e){console.warn("Pull to refresh error:",e)}finally{a(!1)}}i(0),s.current=0};try{return n.addEventListener("touchstart",o,{passive:!0}),n.addEventListener("touchmove",u,{passive:!1}),n.addEventListener("touchend",c,{passive:!0}),()=>{n.removeEventListener("touchstart",o),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",c)}}catch(e){return console.warn("Error setting up pull to refresh:",e),()=>{}}},[e,r,t]),{containerRef:l,isRefreshing:t,pullDistance:r,pullProgress:Math.min(r/60,1)}}},1256:function(e,t,a){a.d(t,{BO:function(){return C},qF:function(){return F}});var n=a(7437),r=a(9625),i=a(6885),s=a(9360),l=a(9121),o=a(2093),u=a(5341),c=a(5843),d=a(2265);let h=["\uD83C\uDF31","\uD83C\uDF43","\uD83C\uDF3F","\uD83C\uDF3A","\uD83C\uDF3B","\uD83C\uDF39","\uD83C\uDF37","\uD83C\uDF35","\uD83C\uDF45","\uD83E\uDD55","\uD83C\uDF3E","\uD83C\uDF38","\uD83C\uDF3C","\uD83E\uDEB4","\uD83C\uDF33"],g=["#10B981","#3B82F6","#8B5CF6","#EF4444","#F59E0B","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],p=e=>{let t=(0,l.E)(new Date,e);return 1===e?"Tomorrow":e<=7?"in ".concat(e," days"):(0,o.WU)(t,"MMM dd")},m=(e,t)=>{if(!e||"Just planted"===e)return"healthy";let a=new Date(e),n=Math.floor((Date.now()-a.getTime())/864e5);return n>t+2?"overdue":n>=t?"needs_water":"healthy"},w=e=>({id:e.id,name:e.name,species:e.species,plantingDate:e.plantingDate||e.plantedDate||new Date().toISOString(),wateringFrequency:e.wateringFrequency,icon:e.icon,iconColor:e.iconColor,lastWatered:e.lastWatered,nextWatering:e.nextWatering,status:e.status,notes:e.notes,noteAttachments:e.noteAttachments,imageUrl:e.imageUrl,createdAt:e.createdAt,updatedAt:e.updatedAt}),f=(e,t)=>({name:e.name,species:e.species,plantedDate:e.plantingDate,plantingDate:e.plantingDate,wateringFrequency:e.wateringFrequency,icon:e.icon,iconColor:e.iconColor,lastWatered:e.lastWatered,nextWatering:e.nextWatering||p(e.wateringFrequency),status:e.status,notes:e.notes,noteAttachments:e.noteAttachments,imageUrl:e.imageUrl,userId:t}),D=()=>{let e=new Date().toISOString(),t=(0,u.k)(new Date,1).toISOString(),a=(0,u.k)(new Date,3).toISOString(),n=(0,u.k)(new Date,7).toISOString();return[{id:(0,s.Z)(),name:"Sunny the Sunflower",species:"Helianthus annuus",plantingDate:(0,u.k)(new Date,30).toISOString(),wateringFrequency:2,icon:"\uD83C\uDF3B",iconColor:"#F59E0B",lastWatered:t,nextWatering:"Tomorrow",status:"healthy",notes:"Growing beautifully! Loves the morning sun.",createdAt:e,updatedAt:e},{id:(0,s.Z)(),name:"Rosie",species:"Rosa gallica",plantingDate:(0,u.k)(new Date,45).toISOString(),wateringFrequency:3,icon:"\uD83C\uDF39",iconColor:"#EC4899",lastWatered:a,nextWatering:"Today",status:"needs_water",notes:"Beautiful red blooms. Needs regular watering.",createdAt:e,updatedAt:e},{id:(0,s.Z)(),name:"Spike",species:"Opuntia microdasys",plantingDate:(0,u.k)(new Date,60).toISOString(),wateringFrequency:14,icon:"\uD83C\uDF35",iconColor:"#10B981",lastWatered:n,nextWatering:"in 7 days",status:"healthy",notes:"Low maintenance desert friend. Water sparingly.",createdAt:e,updatedAt:e},{id:(0,s.Z)(),name:"Basil Buddy",species:"Ocimum basilicum",plantingDate:(0,u.k)(new Date,20).toISOString(),wateringFrequency:1,icon:"\uD83C\uDF3F",iconColor:"#84CC16",lastWatered:(0,u.k)(new Date,5).toISOString(),nextWatering:"Overdue",status:"overdue",notes:"Perfect for cooking! Needs daily water.",createdAt:e,updatedAt:e}]},y=(0,r.Ue)()((0,i.tJ)((e,t)=>({plants:[],recentlyWateredPlant:null,loading:!1,error:null,syncWithDatabase:async()=>{e({loading:!0,error:null});try{let t=(await c.Pr.getPlants()).map(w);e({plants:t,loading:!1})}catch(t){console.error("Failed to sync with database:",t),e({error:t instanceof Error?t.message:"Sync failed",loading:!1})}},addPlant:async t=>{e({loading:!0,error:null});try{let a={...t,id:(0,s.Z)(),icon:h[Math.floor(Math.random()*h.length)],iconColor:g[Math.floor(Math.random()*g.length)],status:"healthy",lastWatered:"Just planted",nextWatering:p(t.wateringFrequency),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{let t=await c.Pr.createPlant(f(a,"")),n=w(t);e(e=>({plants:[...e.plants,n],loading:!1}))}catch(t){console.warn("Database add failed, adding locally:",t),e(e=>({plants:[...e.plants,a],loading:!1}))}}catch(t){e({error:t instanceof Error?t.message:"Failed to add plant",loading:!1})}},removePlant:async t=>{e({loading:!0,error:null});try{try{await c.Pr.deletePlant(t)}catch(e){console.warn("Database delete failed, removing locally:",e)}e(e=>({plants:e.plants.filter(e=>e.id!==t),loading:!1}))}catch(t){e({error:t instanceof Error?t.message:"Failed to remove plant",loading:!1})}},updatePlant:async(a,n)=>{e({loading:!0,error:null});try{let r=t().plants.find(e=>e.id===a);if(!r)throw Error("Plant not found");let i={...n,updatedAt:new Date().toISOString(),status:n.lastWatered?m(n.lastWatered,r.wateringFrequency):n.status||r.status};try{await c.Pr.updatePlant(a,i)}catch(e){console.warn("Database update failed, updating locally:",e)}e(e=>({plants:e.plants.map(e=>e.id===a?{...e,...i}:e),loading:!1}))}catch(t){e({error:t instanceof Error?t.message:"Failed to update plant",loading:!1})}},waterPlant:async a=>{let n=new Date().toISOString(),r=t().plants.find(e=>e.id===a);r&&(await t().updatePlant(a,{lastWatered:n,status:"healthy",nextWatering:p(r.wateringFrequency)}),e({recentlyWateredPlant:a}),setTimeout(()=>{e({recentlyWateredPlant:null})},3e3))},clearRecentlyWatered:()=>{e({recentlyWateredPlant:null})},getPlantById:e=>t().plants.find(t=>t.id===e),getHealthyPlants:()=>t().plants.filter(e=>"healthy"===e.status),getPlantsNeedingWater:()=>t().plants.filter(e=>"needs_water"===e.status||"overdue"===e.status),initializeSampleData:()=>{let t=D();e(e=>({plants:[...e.plants,...t]}))}}),{name:"plant-store",partialize:e=>({plants:e.plants,recentlyWateredPlant:e.recentlyWateredPlant})})),v=(0,d.createContext)(null);function C(e){let{children:t}=e,a=y();return(0,n.jsx)(v.Provider,{value:a,children:t})}function F(){return(0,d.useContext)(v)||y()}},1554:function(e,t,a){a.d(t,{F:function(){return l},f:function(){return s}});var n=a(7437),r=a(2265);let i=(0,r.createContext)({theme:"system",setTheme:()=>null,resolvedTheme:"light"});function s(e){let{children:t,defaultTheme:a="system",enableSystem:s=!0,disableTransitionOnChange:l=!0,attribute:o="class",...u}=e,[c,d]=(0,r.useState)(()=>localStorage.getItem("theme")||a),[h,g]=(0,r.useState)("light");return(0,r.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===c&&s){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t),g(t);return}let t="system"===c?"light":c;e.classList.add(t),g(t)},[c,s]),(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{if("system"===c){let t=e.matches?"dark":"light";g(t);let a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(t)}};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[c]),(0,n.jsx)(i.Provider,{...u,value:{theme:c,setTheme:e=>{localStorage.setItem("theme",e),d(e)},resolvedTheme:h},children:t})}let l=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},5843:function(e,t,a){a.d(t,{OQ:function(){return n},Pr:function(){return r}});let n=(0,a(7026).eI)("https://ilmtmpgepdpjyiairdry.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlsbXRtcGdlcGRwanlpYWlyZHJ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3NjY3OTIsImV4cCI6MjA2NDM0Mjc5Mn0.9VxZ2Lv5ELgX6eoNo1Da0NaC5SCSqCUkWeK-j2IXP68"),r={async getPlants(){let{data:{user:e}}=await n.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:a}=await n.from("plants").select("*").eq("userId",e.id).order("createdAt",{ascending:!1});if(a)throw a;return t},async createPlant(e){let{data:{user:t}}=await n.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:r}=await n.from("plants").insert({...e,userId:t.id}).select().single();if(r)throw r;return a},async updatePlant(e,t){let{data:{user:a}}=await n.auth.getUser();if(!a)throw Error("User not authenticated");let{data:r,error:i}=await n.from("plants").update(t).eq("id",e).eq("userId",a.id).select().single();if(i)throw i;return r},async deletePlant(e){let{data:{user:t}}=await n.auth.getUser();if(!t)throw Error("User not authenticated");let{error:a}=await n.from("plants").delete().eq("id",e).eq("userId",t.id);if(a)throw a},async logWatering(e){return this.updatePlant(e,{lastWatered:new Date().toISOString()})}}}}]);