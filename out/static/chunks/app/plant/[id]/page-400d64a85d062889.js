(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{9996:function(e,t,a){Promise.resolve().then(a.bind(a,5436))},5436:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(7437),i=a(2265),r=a(2261),s=a(7648),l=a(9376),o=a(1256),c=a(1361),d=a(9581),u=a(5323),h=a(2093),m=a(5710);function p(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),{getPlantById:a,waterPlant:p,updatePlant:g,recentlyWateredPlant:y,clearRecentlyWatered:x}=(0,o.qF)(),[f,A]=(0,i.useState)(!1),[w,j]=(0,i.useState)(""),v=a(e.id);return v?(0,n.jsxs)("div",{className:"min-h-screen bg-white flex flex-col relative",children:[(0,n.jsx)(c.W,{isVisible:y===(null==v?void 0:v.id),onComplete:()=>x(),size:"large"}),(0,n.jsxs)(r.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between px-6 py-4 pt-safe",children:[(0,n.jsx)("button",{onClick:()=>t.back(),className:"text-gray-700",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:v.name}),(0,n.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:v.iconColor+"20",color:v.iconColor},children:v.icon})]}),(0,n.jsxs)("div",{className:"flex-1 px-6 pb-safe",children:[(0,n.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-50 rounded-2xl p-6 mb-6",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600 font-medium",children:"Last Watered"}),(0,n.jsx)("span",{className:"text-gray-900",children:"Just planted"===v.lastWatered?"Just planted":(0,m.Q)(new Date(v.lastWatered),{addSuffix:!0})})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600 font-medium",children:"Next Watering"}),(0,n.jsx)("span",{className:"text-gray-900",children:v.nextWatering})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600 font-medium",children:"Health Status"}),(0,n.jsx)("span",{className:"font-semibold ".concat((e=>{switch(e){case"healthy":return"text-green-600";case"needs_water":return"text-yellow-600";case"overdue":return"text-red-600";default:return"text-gray-600"}})(v.status)),children:(e=>{switch(e){case"healthy":return"Healthy";case"needs_water":return"Needs Water";case"overdue":return"Overdue";default:return e}})(v.status)})]})]})}),(0,n.jsx)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"mb-6",children:(0,n.jsx)(d.X,{onImageCapture:e=>{g(v.id,{imageUrl:e})},currentImage:v.imageUrl,placeholder:"Add a photo of your plant"})}),(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"History"}),(0,n.jsxs)("button",{onClick:()=>A(!0),className:"text-green-600 font-medium flex items-center gap-1",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Note"]})]}),f&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,n.jsx)("textarea",{value:w,onChange:e=>j(e.target.value),placeholder:"Add a note about your plant...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3}),(0,n.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,n.jsx)("button",{onClick:()=>{if(w.trim()){let e=v.notes||"",t=(0,h.WU)(new Date,"MMM dd"),a="".concat(t,": ").concat(w.trim()),n=e?"".concat(e,"\n").concat(a):a;g(v.id,{notes:n}),j(""),A(!1)}},className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"Save Note"}),(0,n.jsx)("button",{onClick:()=>{A(!1),j("")},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),(0,n.jsx)("div",{className:"space-y-3",children:(()=>{let e=[];return e.push({date:v.plantingDate,text:"Planted",type:"planted"}),v.lastWatered&&"Just planted"!==v.lastWatered&&e.push({date:v.lastWatered,text:"Watered",type:"watered"}),v.notes&&v.notes.split("\n").filter(e=>e.trim()).forEach(t=>{if(t.includes(":")){let[a,...n]=t.split(":");e.push({date:new Date().toISOString(),text:n.join(":").trim(),type:"note"})}}),e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())})().map((e,t)=>(0,n.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+.1*t},className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600 font-medium",children:(0,h.WU)(new Date(e.date),"MMM dd")}),(0,n.jsx)("span",{className:"text-gray-900",children:e.text})]},t))}),(0,n.jsx)(r.E.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.8,type:"spring"},className:"flex justify-end mt-6",children:(0,n.jsx)("div",{className:"w-16 h-16",children:(0,n.jsx)(u.O,{size:64,showAnimation:!1})})})]}),(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-8",children:[(0,n.jsxs)("button",{onClick:()=>{v&&(p(v.id),setTimeout(()=>{x()},3e3))},className:"bg-blue-500 text-white py-4 rounded-xl font-medium hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Water Plant"]}),(0,n.jsxs)(s.default,{href:"/list",className:"bg-gray-100 text-gray-700 py-4 rounded-xl font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"View All Plants"]})]})]})]}):(0,n.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF31"}),(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Plant not found"}),(0,n.jsx)(s.default,{href:"/list",className:"text-green-600 hover:text-green-700",children:"← Back to plant list"})]})})}},9581:function(e,t,a){"use strict";a.d(t,{X:function(){return l}});var n=a(7437),i=a(2265),r=a(2261),s=a(5095);function l(e){let{onImageCapture:t,currentImage:a,placeholder:l="Add Photo"}=e,[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),h=(0,i.useRef)(null),m=(0,i.useRef)(null),p=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&g(a),c(!1)},g=e=>{if(u(!0),e.size>5242880){alert("Image size must be less than 5MB"),u(!1);return}let a=new FileReader;a.onload=e=>{var a;let n=null===(a=e.target)||void 0===a?void 0:a.result,i=new Image;i.onload=()=>{let e=document.createElement("canvas"),a=e.getContext("2d"),{width:n,height:r}=i;n>r?n>800&&(r=800*r/n,n=800):r>800&&(n=800*n/r,r=800),e.width=n,e.height=r,null==a||a.drawImage(i,0,0,n,r),t(e.toDataURL("image/jpeg",.8)),u(!1)},i.src=n},a.readAsDataURL(e)};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)(r.E.div,{onClick:()=>c(!0),className:"relative bg-gray-100 rounded-2xl overflow-hidden cursor-pointer hover:bg-gray-200 transition-colors",style:{aspectRatio:"4/3"},whileTap:{scale:.98},children:[a?(0,n.jsx)("img",{src:a,alt:"Plant photo",className:"w-full h-full object-cover"}):(0,n.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-500",children:[(0,n.jsxs)("svg",{className:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,n.jsx)("span",{className:"text-sm font-medium",children:l}),(0,n.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:"Tap to add photo"})]}),d&&(0,n.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-5 h-5 border-2 border-green-500 border-t-transparent rounded-full animate-spin"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Processing image..."})]})}),a&&(0,n.jsx)("div",{className:"absolute top-2 right-2",children:(0,n.jsx)("div",{className:"bg-black bg-opacity-50 rounded-full p-1",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),(0,n.jsx)(s.M,{children:o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>c(!1)}),(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"fixed bottom-4 left-4 right-4 bg-white rounded-2xl p-6 z-50 shadow-2xl",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:a?"Update Photo":"Add Photo"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("button",{onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},className:"w-full bg-green-500 text-white py-4 rounded-xl font-medium hover:bg-green-600 transition-colors flex items-center justify-center gap-3",children:[(0,n.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Take Photo"]}),(0,n.jsxs)("button",{onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},className:"w-full bg-blue-500 text-white py-4 rounded-xl font-medium hover:bg-blue-600 transition-colors flex items-center justify-center gap-3",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Choose from Gallery"]}),a&&(0,n.jsxs)("button",{onClick:()=>{t(""),c(!1)},className:"w-full bg-red-500 text-white py-4 rounded-xl font-medium hover:bg-red-600 transition-colors flex items-center justify-center gap-3",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove Photo"]}),(0,n.jsx)("button",{onClick:()=>c(!1),className:"w-full bg-gray-100 text-gray-700 py-4 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"Cancel"})]})]})]})}),(0,n.jsx)("input",{ref:h,type:"file",accept:"image/*",onChange:p,className:"hidden"}),(0,n.jsx)("input",{ref:m,type:"file",accept:"image/*",capture:"environment",onChange:p,className:"hidden"})]})}},5323:function(e,t,a){"use strict";a.d(t,{O:function(){return d}});var n=a(7437),i=a(2265),r=a(2261),s=a(5095),l=a(3145),o=a(1256);let c=(0,i.memo)(e=>{let{type:t,delay:a}=e,s=(0,i.useMemo)(()=>({initial:{opacity:0,scale:0,y:0},animate:{opacity:[0,1,1,0],scale:[0,1,1.2,0],y:[-20,-40,-60,-80]},exit:{opacity:0,scale:0}}),[]);return(0,n.jsx)(r.E.div,{className:"absolute text-2xl pointer-events-none",variants:s,initial:"initial",animate:"animate",exit:"exit",transition:{duration:2,delay:a,ease:"easeOut"},style:{left:"".concat(20+60*Math.random(),"%"),top:"".concat(20+40*Math.random(),"%")},children:t})});c.displayName="Particle";let d=(0,i.memo)(e=>{let{size:t=150,showAnimation:a=!1,mood:d="neutral"}=e,{plants:u}=(0,o.qF)(),[h,m]=(0,i.useState)(!1),[p,g]=(0,i.useState)([]),[y,x]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>{if(0===u.length)return"neutral";let e=u.filter(e=>"overdue"===e.status).length,t=u.filter(e=>"needs_water"===e.status).length,a=u.filter(e=>"healthy"===e.status).length;return e>0?"mad":t>0?"sad":a>0?"happy":"neutral"},[u]),A="neutral"!==d?d:f,w=(0,i.useMemo)(()=>{switch(A){case"happy":return"hue-rotate(60deg) saturate(1.2) brightness(1.1)";case"sad":return"hue-rotate(240deg) saturate(0.8) brightness(0.8)";case"mad":return"hue-rotate(0deg) saturate(1.5) brightness(1.2)";default:return"none"}},[A]),j=(0,i.useMemo)(()=>{switch(A){case"happy":return"#10B981";case"sad":return"#3B82F6";case"mad":return"#EF4444";default:return"#6B7280"}},[A]);(0,i.useEffect)(()=>{if(!a)return;let e=setInterval(()=>{m(!0),setTimeout(()=>m(!1),3e3)},8e3);return()=>clearInterval(e)},[a]);let v=(0,i.useMemo)(()=>(e,t)=>Array.from({length:t},(t,a)=>({id:Date.now()+a,type:e,delay:.2*a})),[]);return(0,i.useEffect)(()=>{if(!h)return;let e=[];switch(A){case"happy":e=v("✨",5);break;case"sad":e=v("\uD83D\uDCA7",3);break;case"mad":e=v("\uD83D\uDCA2",3);break;default:e=v("\uD83C\uDF3F",2)}g(e),setTimeout(()=>g([]),2500)},[h,A,v]),(0,n.jsxs)("div",{className:"relative inline-block cursor-pointer select-none",style:{width:t,height:t},onClick:()=>m(!h),onTouchStart:()=>m(!h),children:[(0,n.jsx)(r.E.div,{className:"absolute inset-0 rounded-full opacity-30 blur-xl",style:{backgroundColor:j},animate:{scale:[1,1.1,1],opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,n.jsx)(r.E.div,{className:"relative w-full h-full",initial:{scale:.5,rotate:-180,opacity:0},animate:{scale:1,rotate:0,opacity:1},transition:{type:"spring",stiffness:200,damping:20,duration:.8,onComplete:()=>x(!0)},whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,n.jsx)(r.E.div,{className:"w-full h-full",animate:h?{}:{scale:[1,1.02,1],rotate:[0,1,-1,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:(0,n.jsx)(r.E.div,{className:"w-full h-full relative",animate:h?{scale:[1,1.1,.95,1.05,1],rotate:[0,-5,5,-2,0],y:[0,-10,5,-5,0]}:{},transition:{duration:2,ease:"easeInOut"},children:(0,n.jsx)(l.default,{src:"/assets/tamagatchi.png",alt:"Tamagotchi Pet",width:t,height:t,className:"w-full h-full object-contain",style:{filter:w,imageRendering:"crisp-edges"},priority:t>100,placeholder:"blur",blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="})})})}),(0,n.jsx)(s.M,{children:p.map(e=>(0,n.jsx)(c,{type:e.type,delay:e.delay},e.id))})]})});d.displayName="TamagotchiBlob"},1361:function(e,t,a){"use strict";a.d(t,{W:function(){return s}});var n=a(7437);a(2265);var i=a(5095),r=a(2261);function s(e){let{isVisible:t,onComplete:a,size:s="medium"}=e,l=(()=>{switch(s){case"small":return{width:60,height:60};case"large":return{width:120,height:120};default:return{width:80,height:80}}})();return(0,n.jsx)(i.M,{children:t&&(0,n.jsxs)(r.E.div,{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationComplete:a,children:[(0,n.jsxs)("svg",{width:l.width,height:l.height,viewBox:"0 0 80 80",className:"absolute",children:[[...Array(6)].map((e,t)=>(0,n.jsx)(r.E.circle,{cx:40+(t-2.5)*8,cy:20,r:"3",fill:"#4FC3F7",initial:{cy:20,opacity:0,scale:0},animate:{cy:[20,60,65],opacity:[0,1,0],scale:[0,1,.8]},transition:{duration:1.2,delay:.1*t,ease:"easeOut"}},"drop-".concat(t))),[void 0,void 0,void 0].map((e,t)=>(0,n.jsx)(r.E.circle,{cx:"40",cy:"65",r:"5",fill:"none",stroke:"#4FC3F7",strokeWidth:"2",opacity:"0.7",initial:{r:5,opacity:.7,strokeWidth:2},animate:{r:25,opacity:0,strokeWidth:.5},transition:{duration:1,delay:.8+.2*t,ease:"easeOut"}},"ripple-".concat(t))),[...Array(8)].map((e,t)=>{let a=45*t*(Math.PI/180),i=40+25*Math.cos(a),s=40+25*Math.sin(a);return(0,n.jsx)(r.E.g,{children:(0,n.jsx)(r.E.path,{d:"M ".concat(i," ").concat(s-2," L ").concat(i+1.5," ").concat(s," L ").concat(i," ").concat(s+2," L ").concat(i-1.5," ").concat(s," Z"),fill:"#FFD700",initial:{scale:0,opacity:0,rotate:0},animate:{scale:[0,1,0],opacity:[0,1,0],rotate:180},transition:{duration:1.5,delay:.5+.1*t,ease:"easeOut"}})},"sparkle-".concat(t))}),(0,n.jsx)(r.E.ellipse,{cx:"40",cy:"65",rx:"8",ry:"3",fill:"#81D4FA",opacity:"0.8",initial:{rx:0,ry:0,opacity:0},animate:{rx:[0,12,8],ry:[0,4,3],opacity:[0,.8,0]},transition:{duration:1,delay:.8,ease:"easeOut"}}),(0,n.jsx)(r.E.g,{initial:{y:-10,opacity:0,rotate:-30},animate:{y:0,opacity:1,rotate:0},exit:{y:-10,opacity:0},transition:{duration:.5,ease:"easeOut"},children:(0,n.jsx)(r.E.path,{d:"M 35 10 L 45 10 L 45 15 L 50 15 L 52 13 L 52 17 L 45 17 L 45 20 L 35 20 Z",fill:"#4CAF50",stroke:"#2E7D32",strokeWidth:"1",animate:{rotate:[0,-10,10,0]},transition:{duration:.8,delay:.2,ease:"easeInOut"}})}),(0,n.jsx)(r.E.path,{d:"M 32 45 L 37 50 L 48 39",fill:"none",stroke:"#4CAF50",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.5,delay:1.5,ease:"easeOut"}})]}),[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)(r.E.div,{className:"absolute w-2 h-2 bg-blue-300 rounded-full opacity-70",style:{left:"".concat(30+15*t,"%"),top:"60%"},initial:{y:0,opacity:.7,scale:1},animate:{y:-40,opacity:0,scale:.5},transition:{duration:2,delay:1+.2*t,ease:"easeOut"}},"bubble-".concat(t)))]})})}},1256:function(e,t,a){"use strict";a.d(t,{BO:function(){return j},qF:function(){return v}});var n=a(7437),i=a(9625),r=a(6885),s=a(9360),l=a(9121),o=a(2093),c=a(5341),d=a(5843),u=a(2265);let h=["\uD83C\uDF31","\uD83C\uDF43","\uD83C\uDF3F","\uD83C\uDF3A","\uD83C\uDF3B","\uD83C\uDF39","\uD83C\uDF37","\uD83C\uDF35","\uD83C\uDF45","\uD83E\uDD55","\uD83C\uDF3E","\uD83C\uDF38","\uD83C\uDF3C","\uD83E\uDEB4","\uD83C\uDF33"],m=["#10B981","#3B82F6","#8B5CF6","#EF4444","#F59E0B","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],p=e=>{let t=(0,l.E)(new Date,e);return 1===e?"Tomorrow":e<=7?"in ".concat(e," days"):(0,o.WU)(t,"MMM dd")},g=(e,t)=>{if(!e||"Just planted"===e)return"healthy";let a=new Date(e),n=Math.floor((Date.now()-a.getTime())/864e5);return n>t+2?"overdue":n>=t?"needs_water":"healthy"},y=e=>({id:e.id,name:e.name,species:e.species,plantingDate:e.plantingDate||e.plantedDate||new Date().toISOString(),wateringFrequency:e.wateringFrequency,icon:e.icon,iconColor:e.iconColor,lastWatered:e.lastWatered,nextWatering:e.nextWatering,status:e.status,notes:e.notes,noteAttachments:e.noteAttachments,imageUrl:e.imageUrl,createdAt:e.createdAt,updatedAt:e.updatedAt}),x=(e,t)=>({name:e.name,species:e.species,plantedDate:e.plantingDate,plantingDate:e.plantingDate,wateringFrequency:e.wateringFrequency,icon:e.icon,iconColor:e.iconColor,lastWatered:e.lastWatered,nextWatering:e.nextWatering||p(e.wateringFrequency),status:e.status,notes:e.notes,noteAttachments:e.noteAttachments,imageUrl:e.imageUrl,userId:t}),f=()=>{let e=new Date().toISOString(),t=(0,c.k)(new Date,1).toISOString(),a=(0,c.k)(new Date,3).toISOString(),n=(0,c.k)(new Date,7).toISOString();return[{id:(0,s.Z)(),name:"Sunny the Sunflower",species:"Helianthus annuus",plantingDate:(0,c.k)(new Date,30).toISOString(),wateringFrequency:2,icon:"\uD83C\uDF3B",iconColor:"#F59E0B",lastWatered:t,nextWatering:"Tomorrow",status:"healthy",notes:"Growing beautifully! Loves the morning sun.",createdAt:e,updatedAt:e},{id:(0,s.Z)(),name:"Rosie",species:"Rosa gallica",plantingDate:(0,c.k)(new Date,45).toISOString(),wateringFrequency:3,icon:"\uD83C\uDF39",iconColor:"#EC4899",lastWatered:a,nextWatering:"Today",status:"needs_water",notes:"Beautiful red blooms. Needs regular watering.",createdAt:e,updatedAt:e},{id:(0,s.Z)(),name:"Spike",species:"Opuntia microdasys",plantingDate:(0,c.k)(new Date,60).toISOString(),wateringFrequency:14,icon:"\uD83C\uDF35",iconColor:"#10B981",lastWatered:n,nextWatering:"in 7 days",status:"healthy",notes:"Low maintenance desert friend. Water sparingly.",createdAt:e,updatedAt:e},{id:(0,s.Z)(),name:"Basil Buddy",species:"Ocimum basilicum",plantingDate:(0,c.k)(new Date,20).toISOString(),wateringFrequency:1,icon:"\uD83C\uDF3F",iconColor:"#84CC16",lastWatered:(0,c.k)(new Date,5).toISOString(),nextWatering:"Overdue",status:"overdue",notes:"Perfect for cooking! Needs daily water.",createdAt:e,updatedAt:e}]},A=(0,i.Ue)()((0,r.tJ)((e,t)=>({plants:[],recentlyWateredPlant:null,loading:!1,error:null,syncWithDatabase:async()=>{e({loading:!0,error:null});try{let t=(await d.Pr.getPlants()).map(y);e({plants:t,loading:!1})}catch(t){console.error("Failed to sync with database:",t),e({error:t instanceof Error?t.message:"Sync failed",loading:!1})}},addPlant:async t=>{e({loading:!0,error:null});try{let a={...t,id:(0,s.Z)(),icon:h[Math.floor(Math.random()*h.length)],iconColor:m[Math.floor(Math.random()*m.length)],status:"healthy",lastWatered:"Just planted",nextWatering:p(t.wateringFrequency),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{let t=await d.Pr.createPlant(x(a,"")),n=y(t);e(e=>({plants:[...e.plants,n],loading:!1}))}catch(t){console.warn("Database add failed, adding locally:",t),e(e=>({plants:[...e.plants,a],loading:!1}))}}catch(t){e({error:t instanceof Error?t.message:"Failed to add plant",loading:!1})}},removePlant:async t=>{e({loading:!0,error:null});try{try{await d.Pr.deletePlant(t)}catch(e){console.warn("Database delete failed, removing locally:",e)}e(e=>({plants:e.plants.filter(e=>e.id!==t),loading:!1}))}catch(t){e({error:t instanceof Error?t.message:"Failed to remove plant",loading:!1})}},updatePlant:async(a,n)=>{e({loading:!0,error:null});try{let i=t().plants.find(e=>e.id===a);if(!i)throw Error("Plant not found");let r={...n,updatedAt:new Date().toISOString(),status:n.lastWatered?g(n.lastWatered,i.wateringFrequency):n.status||i.status};try{await d.Pr.updatePlant(a,r)}catch(e){console.warn("Database update failed, updating locally:",e)}e(e=>({plants:e.plants.map(e=>e.id===a?{...e,...r}:e),loading:!1}))}catch(t){e({error:t instanceof Error?t.message:"Failed to update plant",loading:!1})}},waterPlant:async a=>{let n=new Date().toISOString(),i=t().plants.find(e=>e.id===a);i&&(await t().updatePlant(a,{lastWatered:n,status:"healthy",nextWatering:p(i.wateringFrequency)}),e({recentlyWateredPlant:a}),setTimeout(()=>{e({recentlyWateredPlant:null})},3e3))},clearRecentlyWatered:()=>{e({recentlyWateredPlant:null})},getPlantById:e=>t().plants.find(t=>t.id===e),getHealthyPlants:()=>t().plants.filter(e=>"healthy"===e.status),getPlantsNeedingWater:()=>t().plants.filter(e=>"needs_water"===e.status||"overdue"===e.status),initializeSampleData:()=>{let t=f();e(e=>({plants:[...e.plants,...t]}))}}),{name:"plant-store",partialize:e=>({plants:e.plants,recentlyWateredPlant:e.recentlyWateredPlant})})),w=(0,u.createContext)(null);function j(e){let{children:t}=e,a=A();return(0,n.jsx)(w.Provider,{value:a,children:t})}function v(){return(0,u.useContext)(w)||A()}},5843:function(e,t,a){"use strict";a.d(t,{OQ:function(){return n},Pr:function(){return i}});let n=(0,a(7026).eI)("https://ilmtmpgepdpjyiairdry.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlsbXRtcGdlcGRwanlpYWlyZHJ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3NjY3OTIsImV4cCI6MjA2NDM0Mjc5Mn0.9VxZ2Lv5ELgX6eoNo1Da0NaC5SCSqCUkWeK-j2IXP68"),i={async getPlants(){let{data:{user:e}}=await n.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:a}=await n.from("plants").select("*").eq("userId",e.id).order("createdAt",{ascending:!1});if(a)throw a;return t},async createPlant(e){let{data:{user:t}}=await n.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:i}=await n.from("plants").insert({...e,userId:t.id}).select().single();if(i)throw i;return a},async updatePlant(e,t){let{data:{user:a}}=await n.auth.getUser();if(!a)throw Error("User not authenticated");let{data:i,error:r}=await n.from("plants").update(t).eq("id",e).eq("userId",a.id).select().single();if(r)throw r;return i},async deletePlant(e){let{data:{user:t}}=await n.auth.getUser();if(!t)throw Error("User not authenticated");let{error:a}=await n.from("plants").delete().eq("id",e).eq("userId",t.id);if(a)throw a},async logWatering(e){return this.updatePlant(e,{lastWatered:new Date().toISOString()})}}}},function(e){e.O(0,[216,744],function(){return e(e.s=9996)}),_N_E=e.O()}]);